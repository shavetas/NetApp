<!-- custom.grz.category -->
<style>
.lia-component-custom-grz-category .top-card-wrapper {
    margin-bottom: 10px;
    overflow: hidden;
    flex-wrap: wrap;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: wrap column;
    flex-flow: wrap;
    max-height: inherit;
    width: 100%;
    justify-content: space-around;
}
.grid2a {
    width: 100%;
    display: block;
    max-width: 100%;
    padding-top: 20px;
    position: relative;
}
.lia-component-custom-grz-category .category-card{
  width: calc(25% - 24px);
  margin-right: 32px;
}
.lia-component-custom-grz-category .top-card-wrapper.grid .category-card:nth-of-type(4){
  margin-right:0;
}
.lia-component-custom-grz-category .category-card .title.card-title {
    text-decoration: none;
    /*max-width: 120px;*/
    margin: auto;
}
@media only screen and (max-width:767px){
      .lia-component-custom-grz-category .grid{
        display:grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
        grid-template-areas:"a1"
                            "b"
                            "a2"
                            "a3"
                            "a4";
      }
      .lia-quilt-column-cs-4 {
        width: 100%;
      }
.lia-component-custom-grz-subcategory .lia-panel-content-wrapper .lia-panel-content .card-wrapper-row:last-child .sub-category-wrapper {
    box-shadow: none;
}
.lia-component-custom-grz-subcategory .lia-panel-content-wrapper .lia-panel-content .sub-category-wrapper {
    box-shadow: none;
}
.lia-component-custom-grz-subcategory .lia-panel-content-wrapper .lia-panel-content .sub-category-wrapper:last-child{
    box-shadow: none;
}
      .grid2a{
        grid-area:b;
      }
      #lia-body .grid1{
        display:grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
        grid-template-areas:"a1"
                            "b"
                            "a2"
                            "a3"
                            "a4";
      }
      #lia-body .grid2{
        display:grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
        grid-template-areas:"a1"
                             "a2"
                             "b"
                             "a3"
                             "a4";
      }
      #lia-body .grid3{
        display:grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
        grid-template-areas:"a1"
                            "a2"
                            "a3"
                            "b"
                            "a4";
      }
      #lia-body .grid4{
        display:grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
        grid-template-areas:"a1"
                            "a2"
                            "a3"
                            "a4"
                            "b";
      }
      a.lia-quilt-column.category-card.category-card-1{
        grid-area:a1;
      }
      a.lia-quilt-column.category-card.category-card-2{
        grid-area:a2;
      }
      a.lia-quilt-column.category-card.category-card-3{
        grid-area:a3;
      }
      a.lia-quilt-column.category-card.category-card-4{
        grid-area:a4;
      }
    .lia-component-custom-grz-category .category-card {
        width: 100%;
        margin-bottom: 15px;
    }
    .lia-component-custom-grz-category .category-card .title.card-title{
        max-width: 100%;
    }
    .icon.card-icon {
        display: inline-block;
        margin-right: 15px;
    }
    .text-content-center {
        /* text-align: left; */
    }
    .lia-component-custom-grz-category .category-card .title.card-title{
        max-width: 100%;
        display: inline-block;
    }
    .lia-custom-component .thread-wrapper-section .thread-wrapper .thread-common-section .thread-detail .net-app-section{
        width: 100%;
    }
    .text-content-right {
        text-align: left;
    } 
}
</style>
<#include "custom.grz.fields" />
<#if page.name = "CategoryPage" >
  <#assign currentCategory = "WHERE parent_category.id = '"+coreNode.id+"' limit 4" >
<#else>
  <#assign extraBox = true >
  <#assign homePageMainCatId = "'" + settings.name.get('customcontent.7_text', '0')?replace(",","','") + "'"  />
  <#assign currentCategory = "WHERE  id in (${homePageMainCatId})" >
</#if>
<#assign subCategoryOf = 'products-and-solutions' >
<#assign topCategories = rest("2.0", "/search?q=" + "SELECT ${CATEGORY_FIELDS} FROM categories ${currentCategory}"?trim?url).data.items >
<#assign allTopCatIds = [] >
<#if extraBox>
  <#assign extraBoxWrapper = [{"id":"QuickLinks","title":"Quick Links","view_href":"/t5/custom/page/page-id/QuickLinks"}] >
  <#assign topCategories = extraBoxWrapper + topCategories >
</#if>
<div class="lia-panel lia-panel-standard Category Chrome lia-custom-component lia-component-custom-grz-category">
    <div class="lia-decoration-border">
        <div class="lia-decoration-border-top">
            <div> </div>
        </div>
        <div class="lia-decoration-border-content">
            <div>
                <div class="lia-panel-heading-bar-wrapper">
                    <div class="lia-panel-heading-bar net-app-section padding-0">
                      <span aria-level="4" role="heading" class="lia-panel-heading-bar-title net-app-section">
                        Forums
                      </span>
                      <#if topCategories?size &gt; 0 >
                        <span class="lia-panel-button-section net-app-section">
                          <a class="lia-button lia-button-more view-more" href="/t5/Forums/ct-p/forums">View All</a>
                        </span>
                      </#if>
                    </div>
                </div>
                <div class="lia-panel-content-wrapper">
                    <div class="lia-panel-content">
                      <#list topCategories?chunk(4) as topCategorie>
                      <#if topCategorie?counter == 1 >
                        <div class="top-card-wrapper grid">
                        <#-- <div class="arrow arrow1"></div> -->
                      <#else>
                        <div class="top-card-wrapper view-more-category grid">
                      </#if>
                        <#list topCategorie as cat>
                          <#assign allTopCatIds += [cat.id] >
                            
                              <#assign activeText = "" >
                              <#-- <#if cat.id == subCategoryOf >
                                <#assign activeText = "active" >
                              </#if> -->
                              <a href="${cat.view_href}" data-id="${cat.id}" data-view="grid${cat?counter}" data-view-IE="row3 row5 row7 row9" class="lia-quilt-column category-card ${activeText} category-card-${cat?counter}">
                                  <div class="text-content-center card-content">
                                      <div class="icon card-icon">
                                        <img class="cat-icon" src='${asset.get("/html/assets/${cat.id}.png")}'>
                                        <img class="cat-icon hover-state" src='${asset.get("/html/assets/${cat.id}-hover.png")}'>
                                      </div>
                                      <div class="title card-title">
                                        ${cat.title}
                                      </div>
                                  </div>
                              </a>
                            
                          </#list>
                          <div class="grid2a">
                            <div class="arrow"></div>
                            <@component id="custom.grz.subcategory" subcategoryIds = allTopCatIds />
                            </div>
                        </div>
                      </#list>
                        <!-- <div class="lia-view-all"><a class="lia-link-navigation view-all-link" rel="nofollow" id="link_25" href="/t5/forums/recentpostspage/post-type/thread/category-id/GrzHomePage">View All</a></div> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="lia-decoration-border-bottom">
            <div> </div>
        </div>
    </div>
</div>

<@component id="custom.grz.sub-categoryHandler"/>
<#--
<@liaAddScript>
(function($) { 
  $(document).ready(function(){
    $(".lia-component-custom-grz-category .view-more").click(function(){
      $(".top-card-wrapper.view-more-category").slideToggle();
    });
   });     
})(LITHIUM.jQuery);
</@liaAddScript>
-->
